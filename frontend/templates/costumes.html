<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Костюмы на Прокат - Каталог</title>
    <link rel="stylesheet" href="/frontend/static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<header>
    <div class="container">
        <nav class="navbar">
            <div class="logo">
                <img src="/images/logo.PNG" alt="A beautiful landscape" width="200" height="100">
            </div>
            <div class="nav-links">
                <a href="/frontend/templates/base.html">Главная</a>
                <a href="/frontend/templates/dashboard.html">Личный Кабинет</a>
                <a href="/frontend/templates/costumes.html">Костюмы</a>
            </div>
        </nav>
    </div>
</header>

<div class="container">
    <h1>Костюмы на Прокат</h1>
    <p>Найдите идеальный образ для любого события!</p>
</div>

<main class="container">
    <section class="costume-grid" id="costumesGrid"></section>

    <!-- Админ-панель (скрыта по умолчанию) -->
    <section id="adminPanel" style="display:none; margin-top:30px;">
        <h2>Админ: управление костюмами</h2>
        <div id="error-message" style="display:none;"></div>
        <div id="success-message" style="display:none;"></div>

        <form id="adminCostumeForm" style="position:static; background:#fff; color:#000; width:100%; max-width:760px; box-shadow: var(--shadow); padding:20px; border-radius:8px;">
            <h3 style="color:#000; margin-top:0;">Создать/обновить костюм</h3>
            <input type="hidden" id="costumeId">
            <label>Название</label>
            <input type="text" id="title" required>
            <label>Краткое описание</label>
            <input type="text" id="description">
            <label>Цена (руб.)</label>
            <input type="number" id="price" min="0" step="1" required>
            <label>Доступен</label>
            <input type="checkbox" id="available" checked>
            <label>Изображение</label>
            <input type="file" id="image" accept="image/png, image/jpeg">
            <div style="display:flex; gap:10px;">
                <button type="submit" id="saveBtn">Сохранить</button>
                <button type="button" id="resetBtn">Очистить</button>
            </div>
        </form>

        <div style="margin-top:20px;">
            <h3>Список костюмов</h3>
            <table style="width:100%; border-collapse:collapse; background:#fff;">
                <thead>
                    <tr style="background:#eee;">
                        <th style="padding:8px; border:1px solid #ccc;">ID</th>
                        <th style="padding:8px; border:1px solid #ccc;">Превью</th>
                        <th style="padding:8px; border:1px solid #ccc;">Название</th>
                        <th style="padding:8px; border:1px solid #ccc;">Цена</th>
                        <th style="padding:8px; border:1px solid #ccc;">Доступен</th>
                        <th style="padding:8px; border:1px solid #ccc;">Действия</th>
                    </tr>
                </thead>
                <tbody id="adminCostumesBody"></tbody>
            </table>
        </div>

        <div style="margin-top:30px;">
            <h3>Все бронирования</h3>
            <table style="width:100%; border-collapse:collapse; background:#fff;">
                <thead>
                    <tr style="background:#eee;">
                        <th style="padding:8px; border:1px solid #ccc;">ID</th>
                        <th style="padding:8px; border:1px solid #ccc;">Пользователь</th>
                        <th style="padding:8px; border:1px solid #ccc;">Костюм</th>
                        <th style="padding:8px; border:1px solid #ccc;">Дата с</th>
                        <th style="padding:8px; border:1px solid #ccc;">Дата по</th>
                    </tr>
                </thead>
                <tbody id="adminReservationsBody"></tbody>
            </table>
        </div>
    </section>
</main>

<footer>
    <div class="container">
        <div class="footer-content">
            <div class="logo">
                <span>ателье "Новый стиль"</span>
            </div>
            <p>Портал для клиентов &copy; 2025. Все права защищены.</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-telegram"></i></a>
                <a href="#"><i class="fab fa-vk"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>
</footer>

<!-- Модалка бронирования -->
<div id="bookingModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
    <div style="background:#fff; width:95%; max-width:700px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.2); overflow:hidden;">
        <div style="padding:16px 20px; background:linear-gradient(135deg, #790866 0%, #d586be 100%); color:#000; display:flex; align-items:center; justify-content:space-between;">
            <h3 style="margin:0;">Заявка на бронирование костюма</h3>
            <button id="bookClose" aria-label="Закрыть" style="background:transparent; border:none; font-size:22px; cursor:pointer; color:#000">×</button>
        </div>
        <form id="costumeBookingForm" style="padding:20px;">
            <p id="bookingCostumeTitle" style="margin:8px 0 16px 0; font-weight:600; color:#333; font-size:1.1em;"></p>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
                <div>
                    <label for="dateFrom" style="display:block; margin-bottom:6px; color:#343a40;">Дата начала бронирования</label>
                    <input type="date" id="dateFrom" name="date_from" required style="width:100%; padding:10px; border:1px solid #e0e0e0; border-radius:8px;">
                </div>
                <div>
                    <label for="dateTo" style="display:block; margin-bottom:6px; color:#343a40;">Дата окончания бронирования</label>
                    <input type="date" id="dateTo" name="date_to" required style="width:100%; padding:10px; border:1px solid #e0e0e0; border-radius:8px;">
                </div>
                <div style="grid-column:1 / -1;">
                    <label for="bookingPhone" style="display:block; margin-bottom:6px; color:#343a40;">Телефон</label>
                    <input type="tel" id="bookingPhone" name="phone" placeholder="+7 (XXX) XXX-XX-XX" required style="width:100%; padding:10px; border:1px solid #e0e0e0; border-radius:8px;">
                </div>
            </div>
            <div id="availabilityInfo" style="margin:16px 0; font-size:0.95rem; padding:10px; border-radius:8px;"></div>
            <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:18px;">
                <button type="button" id="bookCancel" style="padding:10px 16px; border-radius:8px; border:1px solid #e0e0e0; background:#fff; cursor:pointer;">Отмена</button>
                <button type="submit" id="bookSubmit" style="padding:10px 16px; border-radius:8px; border:none; background:linear-gradient(135deg, #790866 0%, #d586be 100%); color:#000; cursor:pointer;">Отправить заявку</button>
            </div>
            <div id="bookingMessage" style="display:none; margin-top:12px; padding:10px; border-radius:8px;"></div>
        </form>
    </div>
</div>

<script src="/frontend/templates/auth.js"></script>
<script src="/frontend/templates/costumes.js"></script>
</body>
</html>
